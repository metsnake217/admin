extends layout

block content
  div(id="ios-light")
    center
      p(id="disableText")
      div
        div(id="actionorder" class="exit" style="width: 50%; float: left; background-color: rgba(138, 109, 59, 0.55);")="OK"
        div(class="exit" id="actioncancel")="Cancel"
  div(class="shade" id="shade")
  div(class="shade-light" id="shade-light")
  div(class="container login marginbottom")
    div
      h1= 'Users.'
      p!="You can now <span class='yokeColor'>disable</span> or reactivate users per request. The user will receive a notification email."
      if users
        div(id="results")
          div(id="ctl00_Div2" class="row rank")
            div(class="table-responsive")                
              table(id="rankTblload" class="table rankTbl")
                thead
                  tr(class="you info-best" style="font-weight: bold")
                    td= 'id '
                    td(class="wrapped desktabonly")!= 'Name'
                    td(class="desktabonly")= 'Surname'
                    td(class="desktabonly")= 'Lab'
                    td= 'Email'
                    td= 'Admin'
                    td= 'Disable'
                tbody
                  -var ob = users
                  -for(var prop in ob)
                    - var checkedstr = false
                    - var checkedstradmin = false
                    - var isdisabled = ""
                    - var disabled = parseInt(ob[prop].disable)
                    - if(disabled == 0)
                      - isdisabled = "yokeBackColor"
                      - checkedstr = true
                    - var isadmin = parseInt(ob[prop].admin)
                    - if(isadmin == 1)
                      - checkedstradmin = true
                    tr(class=isdisabled)
                      td #{ob[prop].id}
                      td(class="wrapped desktabonly") #{ob[prop].name}
                      td(class="desktabonly") #{ob[prop].surname}
                      td(class="desktabonly") #{ob[prop].lab}
                      td #{ob[prop].email}
                      td
                        form(action="/isadmin" method="post")
                          input(type="checkbox" name="isadmin" value="isadmin" class="isadmin" checked=(checkedstradmin===true ? "checked" : undefined))
                          input(type="hidden" name="id" value=ob[prop].id)
                          input(type="hidden" name="name" value=ob[prop].name)
                          input(type="hidden" name="surname" value=ob[prop].surname)
                          input(type="hidden" name="email" value=ob[prop].email)
                          input(type="hidden" name="admin" value=ob[prop].admin)
                      td
                        form(action="/disable" method="post")
                          input(type="checkbox" name="cancel" value="cancel" class="cancel" checked=(checkedstr===true ? "checked" : undefined))
                          input(type="hidden" name="id" value=ob[prop].id)
                          input(type="hidden" name="name" value=ob[prop].name)
                          input(type="hidden" name="surname" value=ob[prop].surname)
                          input(type="hidden" name="email" value=ob[prop].email)
              script.
                $(document).ready(function() {
                  $('#rankTblload').DataTable();
                });
      if !users
        div(class="alert alert-danger")!= "No Users have registered"
