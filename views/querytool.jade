extends layout

block content
    div(class="container login marginbottom")
        div
            h1= 'Query.'
            p!="Start querying the database."
            - searchText = "Looking for reagent..."
            - searchTextCatalog = "Looking for catalog number..."
            - classButton = "btn-success"
            - classButtonCatalog = "btn-success"
            if searchformText
                - searchText = "" + searchformText
                - classButton = "btn-success-results"
            if searchformTextCatalog
                - searchTextCatalog = "Search: " + searchformTextCatalog
                - searchformTextCatalog = "Search: " + searchformTextCatalog
                - classButtonCatalog = "btn-success-results"            
            div(id="ctl00_Div2" class="row")
                div
                    if message
                        div(class="alert alert-danger")!= message
                    form(action="/querytool" method="post")
                        textarea(name="queryText" list="agent-datalist" class="form-control" id="queryText" placeholder="Select * from ..." cols="30" rows="5" style="outline: none;overflow:auto;width: 100%;")
                        div(class="buttons")
                            //input(type="submit" class="button" value="Get in")
                            button(class="btn " + classButton + " btn-lg btn-block" type='submit') Submit
                            img(src="images/yoke5.png", alt="The Search", title="Search", style="border-width:0px; width: 50px; margin-top: -77px; margin-left: 300px;")
                    div(style="background-color: #3d9dcb; height: 2px; margin-bottom: 40px; margin-top: 30px;")
        
        if(searchResults != null && searchResults.length > 0)
            div.searchResults()
              div
                  span(style="text-align: center")
                    h3="Your query: "
                        if searchformText
                            span(style="color: #3d9dcb;")=" " + searchText
              #labyokers.container.results(style="width:100%;")
                div(id="ctl00_Div2" class="row rank").match
                   - i = 1
                   - className = ""
                   div(class="table-responsive")
                     - if(error != "error")  
                       - for(var prop in searchResults)
                            p!=JSON.stringify(searchResults[prop])
                     - if (error == "error")
                         p!=JSON.stringify(searchResults)
        if(searchResults != undefined && searchResults.length == 0 && searchformText)
            div.searchResults(id="results")
                div(id="ctl00_Div2" class="row rank")
                   div(class="table-responsive")
                      span(style="text-align: center")
                        h3="Sorry we could not process your query: "
                            span(style="color: #3d9dcb;")=" " + searchText
                        h4="Try another one!!" 
                         
            script="$(window).scrollTop($('#results').offset().top).scrollLeft($('#results').offset().left);"

        

